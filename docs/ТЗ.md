# Техническое задание

## Стек

Грубый список частей проекта и соответсвующих им ЯП

- tgbot Python
- llm C++
- mcp C#
- proxyrasp Java
- cachedb Postgres

## План

Примерные этапы и порядок разработки

Допускается одновременная разработка нескольких частей

### 1. tgbot

расписание берется с сервера политеха напрямую

запросы к расписанию выполняются внутри логики бота

### 2. proxyrasp

запросы к официальному расписанию выделяются в отдельный сервер

код бота не содержит прямый запросов к расписанию, они заменяются на такие же запросы к нашему прокси

прокси имеет такой же или крайне схожий с официальным апи для запросов

самая сложная часть

логика работы такая:

1. проверяем доступность официального сервера
    1. если сервер доступен, то расписание у берем него
        1. если расписание без очевидных ошибок
            1. возвращаем их как результат
            2. сохраняем в кэш полученную версию расписания
        2. если есть ошибки (напр. расписание пустое, когда оно должно быть не пустое)
            1. идем за расписанием в кэш
                1. если в кэше есть расписания на запрашиваемый день, то возвращаем оба официальное и наше последнее со словами: официальное расписание может содержать ошибки, но мы нашли более старую, правильную по нашему мнению, версию у себя, сравните пожалуйста и сделайте выводы сами (короче показываем пользователю что за ошибка)
                2. если нет, то отправляем сообщение с ошибочным ответом официального расписания вида: вы получили официальное расписание, оно выглядит неправильно, а другой версии у себя в кэше не нашли, извините за неудобства
    2. если сервер недоступен, то расписание берем из кэша по правилам выше, только вместо слов об ошибке пишем что официальный сервер недоступен, только в варианте когда нет расписания у нас и сервер недоступен мы ничего не возвращаем, а говорим что инфы вообще нет сервер лежит, кэша нет пиздец конец

\*возможно разбиение на составные части

### 3. cachedb

разрабатывается БД для промежуточного хранения записей о расписании

тут нужно подумать как хранить информацию о расписании

- можно тупо брать джсоны ответов и пихать их напрямую в БД, где для каждого эндпоинта апи будет своя сущность вида: ключ, датавремя, ответ

- или можно парсить джсоны и выстраивать сложную БД для всех встречающихся сущностей

    группы, преподаватели, дисциплины, аудитории

    учебное занятие представлять как сложную сущность из всех перечисленных с добавленным диапазоном времени

    также должна быть сущность представляющая собой ответ с соответсвующего эндпоинта апи

### 4. llm

разрабатывается сервер языковой модели, выполняющий обработку пользовательских запросов

### 5. mcp

выступает в качестве инструмента, который нейронка может вызывать по своему усмотрению

содержит различные функции с описанием того что они делают, например ПолучитьРасписаниеГруппыНаДень(Группа, День) возвращает расписание Группы на указанный День в формате джсон
